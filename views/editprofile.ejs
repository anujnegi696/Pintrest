<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/editprofile.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css">
</head>
<body>
      <!--  navbar          -->
      <div class="navbar">
        <div class="navbaritem">
         <img src="https://upload.wikimedia.org/wikipedia/commons/0/08/Pinterest-logo.png" alt="HELLO">
        <h3 class="navh3">Pintrest</h3>
        </div>
        <div class="navbaritems">
       <a href="/profile">PROFILE</a>
       <a href="/feed">FEED</a>
       <a href="/logout" class="logout">LOGOUT</a>
      
    </div>
    </div>
  <!-- navbar-->


  <div class="container">

    <form hidden id="uploadform" action="/fileupload" method="post" enctype="multipart/form-data">
        <input type="file" name="image">
      </form>

    <div class="profileedit">
        <div class="profile-picture">
            <span id="uploadicon"><i class="ri-folder-open-fill"></i></i></span>
            <img src="/images/uploads/<%= user.dp%>" alt="">
         </div>
         <a href="#" id="uploadelem"> Edit Picture</a>
        </div>   

        <div class="items">
            <form id="editNameForm" action="/updateprofile" method="post" >
                 <label for="name">NAME :</label>
                 <div class="div">
                  <input type="text" id="name" name="fullname" placeholder="Enter your name" value="<%= user.fullname %>">
                 <button type="button" onclick="saveName()">Save</button>
                  </div>
             </form>


            <form id="editUsernameForm" action="/updateusername" method="post">
                <label for="newUsername">Username :</label>
                <div class="div">
                  <input type="text" id="username" name="username" value="<%=user.username%>" placeholder="Enter your new username" required>
                <button type="submit" onclick="saveUsername()">Save</button>
                </div>
            </form>
            

            <form id="editBioForm" action="/updateprofile" method="post">
                 <label for="bio">BIO :</label>
               <div class="div">
                <textarea id="bio" name="bio" placeholder="Enter your bio"><%= user.bio %></textarea>
                <button type="submit" onclick="saveBio()">Save</button> 
               </div>
            </form>
        </div>
        
        
  </div>
    

   <script>
    document.getElementById('uploadelem').addEventListener('click', function() {
      document.querySelector('#uploadform input').click();
    });

    document.querySelector("#uploadicon").addEventListener("click",function(){
      document.querySelector("#uploadform input").click();
    })
    document.querySelector("#uploadform input").addEventListener("change",function(){
      document.querySelector("#uploadform").submit();
    })
    function saveName() {
        document.getElementById('editNameForm').submit();
    }
    function saveBio() {
        document.getElementById('editBioForm').submit();
    }
    function saveUsername() {
        document.getElementById('editUsernameForm').submit();
    }
    </script>
</body>
</html>